{
  "$anchor": "media-component",
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "type": "object",
  "$merge": {
    "source": {
      "$ref": "component"
    },
    "with": {
      "required": [
        "_setCompletionOn",
        "_startVolume"
      ],
      "properties": {
        "_supportedLayout": {
          "type": "string",
          "title": "Supported layout",
          "default": "both",
          "enum": [
            "full-width",
            "half-width",
            "both"
          ],
          "_adapt": {
            "editorOnly": true
          }
        },
        "instruction": {
          "type": "string",
          "title": "Instruction",
          "description": "This is the instruction text",
          "default": "",
          "_adapt": {
            "translatable": true
          }
        },
        "_media": {
          "type": "object",
          "title": "Media",
          "default": {},
          "properties": {
            "mp4": {
              "type": "string",
              "title": "MP4 Link",
              "description": "Link to an MP4 video",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "video"
              }
            },
            "ogv": {
              "type": "string",
              "title": "OGV Link",
              "description": "Link to an OGV video",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "video"
              }
            },
            "webm": {
              "type": "string",
              "title": "WEBM Link",
              "description": "Link to a WEBM video",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "video"
              }
            },
            "mp3": {
              "type": "string",
              "title": "MP3 Link",
              "description": "Link to an MP3 audio",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "audio"
              }
            },
            "source": {
              "type": "string",
              "title": "Source URL",
              "description": "Enter an external link, such as a YouTube URL",
              "default": ""
            },
            "type": {
              "type": "string",
              "title": "Type",
              "description": "Select the 'Source URL' type, for a YouTube link this would be 'video/youtube', and 'video/vimeo' for Vimeo.",
              "default": "",
              "enum": [
                "",
                "video/youtube",
                "video/vimeo"
              ],
              "_backboneForms": "Select"
            },
            "poster": {
              "type": "string",
              "title": "Poster Link",
              "description": "Image displayed before the video is played (except on Vimeo)",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "image"
              }
            },
            "cc": {
              "type": "array",
              "title": "Closed Captions",
              "items": {
                "type": "object",
                "properties": {
                  "srclang": {
                    "type": "string",
                    "title": "Language Code",
                    "default": ""
                  },
                  "src": {
                    "type": "string",
                    "title": "Caption File",
                    "default": "",
                    "_backboneForms": {
                      "type": "Asset",
                      "media": "other"
                    }
                  }
                }
              }
            }
          }
        },
        "_setCompletionOn": {
          "type": "string",
          "title": "Completion trigger",
          "description": "Defines what media event should trigger completion of this component.",
          "default": "play",
          "enum": [
            "inview",
            "play",
            "ended"
          ],
          "_backboneForms": "Select"
        },
        "_useClosedCaptions": {
          "type": "boolean",
          "title": "Use Closed Captions",
          "default": false
        },
        "_startLanguage": {
          "type": "string",
          "title": "Initial Closed Captions language",
          "description": "Select which closed caption language to display by default. Only required when closed captions are enabled and there are multiple languages.",
          "default": "en"
        },
        "_showVolumeControl": {
          "type": "boolean",
          "title": "Show Volume Control (Not supported on mobile devices)",
          "description": "When enabled, the volume control will appear in the media player. On mobile devices the audio level is controlled the device's physical volume controls.",
          "default": false
        },
        "_startVolume": {
          "type": "string",
          "title": "Default volume (Not supported on mobile devices)",
          "description": "Defines the default volume. On mobile devices the audio level is under the user's physical control",
          "default": "80%",
          "enum": [
            "0%",
            "10%",
            "20%",
            "30%",
            "40%",
            "50%",
            "60%",
            "70%",
            "80%",
            "90%",
            "100%"
          ],
          "_backboneForms": "Select"
        },
        "_allowFullScreen": {
          "type": "boolean",
          "title": "Allow Full Screen",
          "default": false
        },
        "_pauseWhenOffScreen": {
          "type": "boolean",
          "title": "Pause playback when video is no longer in view.",
          "default": false
        },
        "_playsinline": {
          "type": "boolean",
          "title": "Play videos inline on iOS",
          "description": "If enabled, videos will play 'inline' on iPhones (the same way they do on iPads). Note that this feature is only available in iOS10 and above.",
          "default": false
        },
        "_preventForwardScrubbing": {
          "type": "boolean",
          "title": "Attempt to prevent media scrubbing?",
          "description": "If enabled, will attempt to prevent users from skipping ahead in audio/video.",
          "default": false
        },
        "_transcript": {
          "type": "object",
          "title": "Transcript Options",
          "default": {},
          "properties": {
            "_setCompletionOnView": {
              "type": "boolean",
              "title": "Trigger completion?",
              "description": "Whether to have this component mark as completed when the transcript is shown.",
              "default": true
            },
            "_inlineTranscript": {
              "type": "boolean",
              "title": "Show Inline",
              "default": false
            },
            "_externalTranscript": {
              "type": "boolean",
              "title": "Show Link",
              "default": false
            },
            "inlineTranscriptButton": {
              "type": "string",
              "title": "Inline Open Button",
              "default": "",
              "_adapt": {
                "translatable": true
              }
            },
            "inlineTranscriptCloseButton": {
              "type": "string",
              "title": "Inline Close Button",
              "default": "",
              "_adapt": {
                "translatable": true
              }
            },
            "inlineTranscriptBody": {
              "type": "string",
              "title": "Inline Transcript",
              "description": "Optional text appears below the video",
              "default": "",
              "_adapt": {
                "translatable": true
              },
              "_backboneForms": "TextArea"
            },
            "transcriptLinkButton": {
              "type": "string",
              "title": "Link Open Button",
              "default": "",
              "_adapt": {
                "translatable": true
              }
            },
            "transcriptLink": {
              "type": "string",
              "title": "Transcript Link",
              "description": "Select a file for the transcript link",
              "default": "",
              "_backboneForms": {
                "type": "Asset",
                "media": "other"
              }
            }
          }
        },
        "_playerOptions": {
          "type": "object",
          "title": "Player Options",
          "description": "Optional object that can be used to customize the player",
          "default": {},
          "_backboneForms": {
            "type": "CodeEditor",
            "mode": "json"
          }
        }
      }
    }
  }
}
